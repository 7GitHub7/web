"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6156],{3905:function(e,a,n){n.d(a,{Zo:function(){return d},kt:function(){return z}});var t=n(7294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=t.createContext({}),u=function(e){var a=t.useContext(c),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},d=function(e){var a=u(e.components);return t.createElement(c.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},l=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),l=u(n),z=o,y=l["".concat(c,".").concat(z)]||l[z]||p[z]||r;return n?t.createElement(y,i(i({ref:a},d),{},{components:n})):t.createElement(y,i({ref:a},d))}));function z(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=l;var s={};for(var c in a)hasOwnProperty.call(a,c)&&(s[c]=a[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<r;u++)i[u]=n[u];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}l.displayName="MDXCreateElement"},4684:function(e,a,n){n.r(a),n.d(a,{assets:function(){return d},contentTitle:function(){return c},default:function(){return z},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var t=n(7462),o=n(3366),r=(n(7294),n(3905)),i=["components"],s={sidebar_position:1},c=void 0,u={unversionedId:"Java/patterns/Inbox Outbox",id:"Java/patterns/Inbox Outbox",title:"Inbox Outbox",description:"W tym artykule postaram si\u0119 wyja\u015bni\u0107 w jaki spos\xf3b mo\u017cna zapewni\u0107 gwarancj\u0119 wysy\u0142ania i odbierania wiadomo\u015bci.",source:"@site/docs/Java/patterns/Inbox Outbox.md",sourceDirName:"Java/patterns",slug:"/Java/patterns/Inbox Outbox",permalink:"/en/docs/Java/patterns/Inbox Outbox",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/patterns/Inbox Outbox.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Equals and HashCode",permalink:"/en/docs/Java/concepts/Equals i hashCode"},next:{title:"SAGA",permalink:"/en/docs/Java/patterns/SAGA"}},d={},p=[{value:"Rodzaje:",id:"rodzaje",level:4},{value:"Outbox Pattern",id:"outbox-pattern",level:3},{value:"Inbox Pattern",id:"inbox-pattern",level:3}],l={toc:p};function z(e){var a=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,t.Z)({},l,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"W tym artykule postaram si\u0119 wyja\u015bni\u0107 w jaki spos\xf3b mo\u017cna zapewni\u0107 gwarancj\u0119 wysy\u0142ania i odbierania wiadomo\u015bci.\nKluczowym s\u0142owem powi\u0105zanym z danym zagadnieniem jest idempotencja - jest to gwarancja na to, \u017ce nie zale\u017cnie od ilo\u015bci wykona\u0144 takiej samej czynno\u015bci, wynik by\u0142 taki sam.\nTutaj mo\u017cna sobie wyobrazi\u0107 sytuacj\u0119 bankow\u0105 w kt\xf3rej otrzymali\u015bmy dwa zdarzenia o przelewie. Je\u015bli zdarzenie przetworzymy dwukrotnie to docelowe konto wzbogaci si\u0119 dwukrotnie o warto\u015b\u0107 przelewu. Drugim przyk\u0142adem b\u0119dzie ta sama sytuacja lecz informacja o przelewie nigdy nie zostanie wys\u0142ana - konto u\u017cytkownika zostanie obci\u0105\u017cone lecz pieni\u0105dze nie zostan\u0105 nigdy dostarczone."),(0,r.kt)("h4",{id:"rodzaje"},"Rodzaje:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"At-most once - zdarzenie wysy\u0142ane jest jeden raz, nie zale\u017cnie od efektu. "),(0,r.kt)("li",{parentName:"ul"},"At-least once - zdarzenie b\u0119dzie wysy\u0142ane a\u017c do momentu dostarczenie do adresata. Minusem jest to, \u017ce zdarzenie mo\u017ce by\u0107 dostarczone kilkukrotnie."),(0,r.kt)("li",{parentName:"ul"},"Exactly- once - zdarzenie wys\u0142ane jedno zdarzenie b\u0119dzie obs\u0142u\u017cone dok\u0142adnie jeden raz.")),(0,r.kt)("h3",{id:"outbox-pattern"},"Outbox Pattern"),(0,r.kt)("p",null,'Wzorzec kt\xf3ry gwarantuje, \u017ce zdarzenie b\u0119dzie wys\u0142ane co najmniej jeden raz. Mo\u017cna to zrealizowa\u0107 np.: poprzez dodawanie informacji o zmianach jako zdarzenie do osobnej tabeli. Takie zdarzenie b\u0119dzie tworzone domy\u015blnie z parametrem jako nie wys\u0142ane, a w tle aplikacji dodatkowy proces b\u0119dzie pr\xf3bowa\u0142 wysy\u0142a\u0107 "nie wys\u0142ane" zdarzenie - je\u015bli operacja sie powiedzie to oznaczy go jako wys\u0142ane. Tutaj warto wspomnie\u0107, \u017ce zamiast sprawdza\u0107 kt\xf3re nie zosta\u0142y wys\u0142ane, to mo\u017cna wprowadzi\u0107 offset tej kt\xf3ra zosta\u0142a wys\u0142ana poprawnie jako ostatnia - tak jak dzia\u0142a Kafka. '),(0,r.kt)("h3",{id:"inbox-pattern"},"Inbox Pattern"),(0,r.kt)("p",null,"Wzorzec kt\xf3ry gwarantuje, \u017ce zdarzenie b\u0119dzie przetworzone jeden raz. Podobnie jak w OutBox tylko odwracamy sytuacj\u0119 do odbierania wiadomo\u015bci.\nPrzychodz\u0105ce zdarzenia zapisujemy w osobnej tabeli, a nast\u0119pnie synchronizujemy je zgodnie z logik\u0105 w systemie."),(0,r.kt)("p",null,"Dodatek:\nGwarancj\u0119 dostarczalno\u015bci Exactly- once mo\u017cna tak\u017ce osi\u0105gn\u0105\u0107 poprzez sprawdzanie unikalnych id zdarze\u0144 - je\u015bli wszystkie zdarzenia przychodz\u0105ce s\u0105 przechowywane w tabeli to mo\u017cemy weryfikowa\u0107 czy ju\u017c wcze\u015bniej nie otrzymali\u015bmy takiej samej wiadomo\u015bci. Minusem rozwi\u0105zania jest to, \u017ce jest kosztowne."))}z.isMDXComponent=!0}}]);